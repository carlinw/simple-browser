# Release 22: Button Refactor

## Status: PLANNING

## Overview

Simplify the toolbar by removing the Parse button, renaming buttons for clarity, and hiding the interpreter pane during fast execution.

---

## Current vs New Button Layout

| Position | Current | New |
|----------|---------|-----|
| 1 | Examples | Examples |
| 2 | Parse | *removed* |
| 3 | Run | Step |
| 4 | Run Fast | Debug |
| 5 | Step | Run |
| 6 | Reset | Stop |

---

## Behavior Details

### Step
- Auto-parses if code hasn't been parsed yet
- Shows interpreter pane
- Steps through one node at a time

### Debug (formerly "Run")
- Runs with animation delay between nodes
- Shows and updates interpreter pane (Parser/AST/Memory tabs)
- Highlights active token in source code

### Run (formerly "Run Fast")
- Runs at full speed (no delay)
- Hides interpreter pane during execution
- Still highlights active token in source code
- After completion: shows interpreter pane with final state

### Stop (formerly "Reset")
- Disabled until something is running
- Stops execution and returns to edit mode

### Interpreter Pane
- Hidden on page load
- Shown when Debug or Step is used
- Hidden during Run execution
- Shows final state after Run completes

---

## Implementation Tasks

### 1. HTML changes (`index.html`)

- [ ] Remove Parse button
- [ ] Rename: Run → Debug (id: `debug-btn`)
- [ ] Rename: Run Fast → Run (id: `run-btn`)
- [ ] Rename: Reset → Stop (id: `stop-btn`)
- [ ] Reorder buttons: Examples, Step, Debug, Run, Stop

### 2. CSS changes (`styles/base.css`)

- [ ] Add `.interpreter-hidden` class to hide interpreter pane
- [ ] Update any button-specific styles if needed

### 3. JS changes (`src/main.js`)

- [ ] Remove Parse button click handler from toolbar
- [ ] Update `stepOne` to auto-parse if not already parsed
- [ ] Rename function references for new button IDs
- [ ] Add interpreter pane hide/show logic:
  - Debug/Step: show interpreter pane
  - Run: hide interpreter pane, skip tab rendering callbacks
- [ ] Initial state: interpreter pane hidden
- [ ] After Run completes: show interpreter pane with final state
- [ ] Keep source code highlighting for all modes

### 4. Test updates (`tests/*.spec.js`)

- [ ] Update selectors: `#parse-btn` → removed
- [ ] Update selectors: `#run-btn` → `#debug-btn`
- [ ] Update selectors: `#run-fast-btn` → `#run-btn`
- [ ] Update selectors: `#reset-btn` → `#stop-btn`
- [ ] Update test expectations for auto-parse behavior
- [ ] Add tests for interpreter pane visibility
