# Release 1: Project Setup and UI Shell

> Follow CLAUDE.md - do not implement until user approves complete release plan.

## Roadmap Overview

Build functionality first, then add visualization. ~24 releases total.

### Phase 1: Foundation
| Release | Goal |
|---------|------|
| **1** | Project setup, UI shell (editor + output panes) |
| **2** | Lexer (tokenization) |
| **3** | Lexer visualization (step-through, token highlighting) |
| **4** | Parser (AST construction) |
| **5** | AST visualization (interactive tree view) |

### Phase 2: Basic Interpreter
| Release | Goal |
|---------|------|
| **6** | Interpreter: numbers and arithmetic expressions |
| **7** | Interpreter: variables and assignment |
| **8** | Stack visualization (variable storage) |
| **9** | Interpreter: if/else conditionals |
| **10** | Execution visualization (current line highlighting) |

### Phase 3: Control Flow
| Release | Goal |
|---------|------|
| **11** | Interpreter: while loops |
| **12** | Loop visualization (iteration state) |
| **13** | Interpreter: functions and return values |
| **14** | Call stack visualization (stack frames) |

### Phase 4: Memory Model
| Release | Goal |
|---------|------|
| **15** | Interpreter: arrays |
| **16** | Interpreter: objects/structs |
| **17** | Heap visualization (dynamic allocation) |
| **18** | Memory lifecycle visualization (alloc/free) |

### Phase 5: I/O
| Release | Goal |
|---------|------|
| **19** | Print and basic output |
| **20** | Keyboard input |
| **21** | Graphics output (canvas drawing) |
| **22** | Mouse input |

### Phase 6: Polish
| Release | Goal |
|---------|------|
| **23** | Integrated debugging view (all visualizations together) |
| **24** | Tutorial mode / guided walkthrough |

### Phase 7: Sample Programs (one per release)
| Release | Program | Concepts Demonstrated |
|---------|---------|----------------------|
| **25** | Guess the Number | Variables, conditionals, input, loops |
| **26** | Fibonacci | Recursion vs iteration, function calls |
| **27** | Bubble Sort | Arrays, nested loops, swapping |
| **28** | Binary Search | Arrays, divide-and-conquer, conditionals |
| **29** | Tower of Hanoi | Recursion, call stack visualization |
| **30** | Calculator | Parsing, expression evaluation (meta!) |
| **31** | Blackjack | Game state, conditionals, randomness |
| **32** | Maze Navigator | 2D arrays, pathfinding (BFS/DFS) |
| **33** | Pong | Graphics, game loop, keyboard input |
| **34** | Snake | Graphics, input, growing data structures |

Each sample program release includes:
- The program source code
- Step-by-step walkthrough annotations
- Suggested exercises ("try modifying X to see Y")

We can adjust this roadmap as we go. Each release builds on the previous.

---

## Design Notes (for future releases)

### Language Syntax Documentation
Each release that adds language features MUST include a syntax reference section documenting the new constructs. By the end of the project, we'll have a complete language reference built incrementally.

### Step-Level Debugging
The interpreter will support step-by-step execution:
- **[Step]** button - execute one statement, then pause
- **[Resume]** button - continue running until next breakpoint or end
- **`stop`** keyword - pause execution at this line (like a breakpoint in code)

Example:
```
x = 5
stop        // execution pauses here
x = x + 1   // user clicks [Resume] to continue
print x
```

This will be implemented alongside the execution visualization (Release 10).

---

## Release 1 Goal

Set up the project structure and create a basic UI with:
- A code editor pane (where Connor writes code)
- An output pane (where results appear)
- A "Run" button (that shows "Hello, Connor!" for now)
- Testing infrastructure with Playwright

This release is about getting the foundation right so we can build on it.

## Features

### UI Layout

Simple two-pane layout with controls at top (eyes look up, not down):
```
+------------------------------------------+
|              Simple Interpreter          |
+------------------------------------------+
|  [Run]                                   |
+------------------------------------------+
|                    |                     |
|   Code Editor      |     Output          |
|   (textarea)       |     (pre/div)       |
|                    |                     |
|                    |                     |
+------------------------------------------+
```

Future releases will add: [Step] [Resume] buttons for debugging.

### Behavior

1. User types code in the editor
2. User clicks "Run"
3. Output pane shows: `Hello, Connor!`
4. (Future releases will actually execute the code)

### Styling

- Clean, readable fonts (monospace for code)
- Light theme (easy on the eyes)
- Responsive enough to work on different screen sizes
- Clear visual separation between editor and output

## File Structure

```
/
  index.html           # Main page with UI structure
  src/
    main.js            # Entry point, wires up UI
  styles/
    main.css           # All styling
  tests/
    ui.spec.js         # Playwright tests
  build.sh             # Build script
  package.json         # For Playwright
  playwright.config.js # Test configuration
  releases/
    1.md               # This file
  CLAUDE.md            # Project guidelines
```

## HTML Structure

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Interpreter</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <header>
    <h1>Simple Interpreter</h1>
  </header>

  <nav id="toolbar">
    <button id="run-btn">Run</button>
    <!-- Future: [Step] [Resume] buttons for debugging -->
  </nav>

  <main>
    <section id="editor-pane">
      <h2>Code</h2>
      <textarea id="code-editor" placeholder="Write your code here..."></textarea>
    </section>

    <section id="output-pane">
      <h2>Output</h2>
      <pre id="output"></pre>
    </section>
  </main>

  <script src="src/main.js"></script>
</body>
</html>
```

## JavaScript (src/main.js)

```javascript
// Simple Interpreter - Main Entry Point

document.addEventListener('DOMContentLoaded', () => {
  const codeEditor = document.getElementById('code-editor');
  const output = document.getElementById('output');
  const runBtn = document.getElementById('run-btn');

  runBtn.addEventListener('click', () => {
    // For Release 1, just show a greeting
    // Future releases will actually interpret the code
    output.textContent = 'Hello, Connor!';
  });
});
```

## CSS (styles/main.css)

```css
/* Variables */
:root {
  --font-mono: 'Monaco', 'Menlo', 'Consolas', monospace;
  --color-bg: #f5f5f5;
  --color-panel: #ffffff;
  --color-border: #ddd;
  --color-text: #333;
  --color-primary: #4a7aff;
  --color-primary-hover: #3a6aef;
}

/* Reset */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Layout */
body {
  font-family: system-ui, sans-serif;
  background: var(--color-bg);
  color: var(--color-text);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  padding: 1rem;
  background: var(--color-panel);
  border-bottom: 1px solid var(--color-border);
}

header h1 {
  font-size: 1.5rem;
  font-weight: 600;
}

main {
  flex: 1;
  display: flex;
  gap: 1px;
  background: var(--color-border);
  padding: 1px;
}

/* Panes */
#editor-pane,
#output-pane {
  flex: 1;
  background: var(--color-panel);
  padding: 1rem;
  display: flex;
  flex-direction: column;
}

#editor-pane h2,
#output-pane h2 {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
  margin-bottom: 0.5rem;
}

#code-editor {
  flex: 1;
  font-family: var(--font-mono);
  font-size: 14px;
  padding: 0.75rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  resize: none;
  outline: none;
}

#code-editor:focus {
  border-color: var(--color-primary);
}

#output {
  flex: 1;
  font-family: var(--font-mono);
  font-size: 14px;
  padding: 0.75rem;
  background: #1e1e1e;
  color: #d4d4d4;
  border-radius: 4px;
  overflow: auto;
  white-space: pre-wrap;
}

/* Toolbar */
#toolbar {
  padding: 0.75rem 1rem;
  background: var(--color-panel);
  border-bottom: 1px solid var(--color-border);
  display: flex;
  gap: 0.5rem;
}

#run-btn {
  padding: 0.5rem 1.5rem;
  font-size: 1rem;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

#run-btn:hover {
  background: var(--color-primary-hover);
}

/* Responsive */
@media (max-width: 768px) {
  main {
    flex-direction: column;
  }
}
```

## build.sh

```bash
#!/bin/bash
set -e

echo "Building Simple Interpreter..."

# Install dependencies if needed
if [ ! -d "node_modules" ]; then
  echo "Installing dependencies..."
  npm install
fi

# Run tests
echo "Running tests..."
npx playwright test

echo "Build complete!"
```

## package.json

```json
{
  "name": "simple-interpreter",
  "version": "1.0.0",
  "description": "A browser-based interpreter with visual debugging",
  "scripts": {
    "test": "playwright test"
  },
  "devDependencies": {
    "@playwright/test": "^1.40.0"
  }
}
```

## playwright.config.js

```javascript
const { defineConfig } = require('@playwright/test');

module.exports = defineConfig({
  testDir: './tests',
  timeout: 30000,
  use: {
    baseURL: 'http://localhost:8080',
    headless: true,
  },
  webServer: {
    command: 'npx http-server . -p 8080 -c-1',
    port: 8080,
    reuseExistingServer: true,
  },
});
```

## Playwright Tests (tests/ui.spec.js)

### Positive Tests

1. **"page loads with correct title"**
   - Navigate to `/`
   - Verify page title is "Simple Interpreter"

2. **"page has code editor"**
   - Navigate to `/`
   - Verify textarea#code-editor exists and is visible

3. **"page has output pane"**
   - Navigate to `/`
   - Verify pre#output exists and is visible

4. **"page has run button"**
   - Navigate to `/`
   - Verify button#run-btn exists with text "Run"

5. **"clicking run shows greeting"**
   - Navigate to `/`
   - Click run button
   - Verify output contains "Hello, Connor!"

6. **"can type in code editor"**
   - Navigate to `/`
   - Type "print hello" in code editor
   - Verify textarea value is "print hello"

### Negative Tests

7. **"output is empty before run"**
   - Navigate to `/`
   - Verify output pane is empty (no text)

## Deliverables

- [x] index.html with UI structure
- [x] src/main.js with click handler
- [x] styles/main.css with styling
- [x] build.sh script
- [x] package.json with Playwright dependency
- [x] playwright.config.js
- [x] tests/ui.spec.js with 7 tests
- [x] All tests passing

## Status

**COMPLETE**
